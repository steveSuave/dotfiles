#!/bin/bash

# Merges the sql scripts from all folders of given dir 
# recursively to an output.sql file in the same folder.
# bash 4+ is required and also the globstar option to be set.

currentdir="$*"
cd "$currentdir" || exit 1

files=(**/*.sql)
for file in "${files[@]}"; do
	while IFS= read -r line; do
		printf '%s\n' "$line" >> output.sql
	done < "$file"
done

