#!/bin/bash

# a simple pomodoro app, to remind a developer 
# to rest his eyes and move his body

trap 'small; stand=1' 8
trap 'bigs' 14

brake=0 
stand=0

small() {
	osascript -e 'display notification "20 secs" with title "look away"'
    	brake=0
	stand=$(( $stand+1 )) 
}

big() {
	osascript -e 'display notification "do some walkin" with title "GIT UP"'
	stand=0
	brake=0
}

braek() {
	local minute=0
	until [ $minute -eq 60 ]; do
		sleep 1
		minute=$(( $minute+1 ))
	done
    brake=$(( $brake+1 ))
}

while true; do         
	if [ $brake -eq 20 ] && [ $stand -eq 2 ]; then
		big
	elif [ $brake -eq 20 ]; then             
		small
	else             
		braek
	fi 
done

# could alias 'kill -[8|14] $(pgrep -f carrot)' to reset the stages
# for windows cmder: msg.exe /time:4 $USERNAME "look away"
