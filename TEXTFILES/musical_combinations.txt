>>> print(list(reversed(combine([1,2,3,4,5,6,7], 2)))) # also 3,4

[1, 2],     [1, 2, 3],     [1, 2, 3, 4],
[1, 3],     [1, 2, 4],     [1, 2, 3, 5],
[1, 4],     [1, 2, 5],     [1, 2, 3, 6],
[1, 5],     [1, 2, 6],     [1, 2, 3, 7],
[1, 6],     [1, 2, 7],     [1, 2, 4, 5],
[1, 7],     [1, 3, 4],     [1, 2, 4, 6],
[2, 3],     [1, 3, 5],     [1, 2, 4, 7],
[2, 4],     [1, 3, 6],     [1, 2, 5, 6],
[2, 5],     [1, 3, 7],     [1, 2, 5, 7],
[2, 6],     [1, 4, 5],     [1, 2, 6, 7],
[2, 7],     [1, 4, 6],     [1, 3, 4, 5],
[3, 4],     [1, 4, 7],     [1, 3, 4, 6],
[3, 5],     [1, 5, 6],     [1, 3, 4, 7],
[3, 6],     [1, 5, 7],     [1, 3, 5, 6],
[3, 7],     [1, 6, 7],     [1, 3, 5, 7],
[4, 5],     [2, 3, 4],     [1, 3, 6, 7],
[4, 6],     [2, 3, 5],     [1, 4, 5, 6],
[4, 7],     [2, 3, 6],     [1, 4, 5, 7],
[5, 6],     [2, 3, 7],     [1, 4, 6, 7],
[5, 7],     [2, 4, 5],     [1, 5, 6, 7],
[6, 7]      [2, 4, 6],     [2, 3, 4, 5],
            [2, 4, 7],     [2, 3, 4, 6],
            [2, 5, 6],     [2, 3, 4, 7],
            [2, 5, 7],     [2, 3, 5, 6],
            [2, 6, 7],     [2, 3, 5, 7],
            [3, 4, 5],     [2, 3, 6, 7],
            [3, 4, 6],     [2, 4, 5, 6],
            [3, 4, 7],     [2, 4, 5, 7],
            [3, 5, 6],     [2, 4, 6, 7],
            [3, 5, 7],     [2, 5, 6, 7],
            [3, 6, 7],     [3, 4, 5, 6],
            [4, 5, 6],     [3, 4, 5, 7],
            [4, 5, 7],     [3, 4, 6, 7],
            [4, 6, 7],     [3, 5, 6, 7],
            [5, 6, 7]      [4, 5, 6, 7]


>>> permute_repeat([1,2,3], 4)
[1, 1, 1, 1] | [3, 3, 3, 3]
[1, 1, 1, 2] | [3, 3, 3, 2]
[1, 1, 1, 3] | [3, 3, 3, 1]
[1, 1, 2, 1] | [3, 3, 2, 3]
[1, 1, 2, 2] | [3, 3, 2, 2]
[1, 1, 2, 3] | [3, 3, 2, 1]
[1, 1, 3, 1] | [3, 3, 1, 3]
[1, 1, 3, 2] | [3, 3, 1, 2]
[1, 1, 3, 3] | [3, 3, 1, 1]
[1, 2, 1, 1] | [3, 2, 3, 3]
[1, 2, 1, 2] | [3, 2, 3, 2]
[1, 2, 1, 3] | [3, 2, 3, 1]
[1, 2, 2, 1] | [3, 2, 2, 3]
[1, 2, 2, 2] | [3, 2, 2, 2]
[1, 2, 2, 3] | [3, 2, 2, 1]
[1, 2, 3, 1] | [3, 2, 1, 3]
[1, 2, 3, 2] | [3, 2, 1, 2]
[1, 2, 3, 3] | [3, 2, 1, 1]
[1, 3, 1, 1] | [3, 1, 3, 3]
[1, 3, 1, 2] | [3, 1, 3, 2]
[1, 3, 1, 3] | [3, 1, 3, 1]
[1, 3, 2, 1] | [3, 1, 2, 3]
[1, 3, 2, 2] | [3, 1, 2, 2]
[1, 3, 2, 3] | [3, 1, 2, 1]
[1, 3, 3, 1] | [3, 1, 1, 3]
[1, 3, 3, 2] | [3, 1, 1, 2]
[1, 3, 3, 3] | [3, 1, 1, 1]
[2, 1, 1, 1] | [2, 3, 3, 3]
[2, 1, 1, 2] | [2, 3, 3, 2]
[2, 1, 1, 3] | [2, 3, 3, 1]
[2, 1, 2, 1] | [2, 3, 2, 3]
[2, 1, 2, 2] | [2, 3, 2, 2]
[2, 1, 2, 3] | [2, 3, 2, 1]
[2, 1, 3, 1] | [2, 3, 1, 3]
[2, 1, 3, 2] | [2, 3, 1, 2]
[2, 1, 3, 3] | [2, 3, 1, 1]
[2, 2, 1, 1] | [2, 2, 3, 3]
[2, 2, 1, 2] | [2, 2, 3, 2]
[2, 2, 1, 3] | [2, 2, 3, 1]
[2, 2, 2, 1] | [2, 2, 2, 3]
        [2, 2, 2, 2]



>>> list(filter(lambda x: not set([1,8]).issubset(x) and not set([2,9]).issubset(x) and not set([3,10]).issubset(x) and not set([5,12]).issubset(x) and not set([6,13]).issubset(x), combine([1,2,3,5,6,8,9,10,12,13], 5)))
[1, 2, 3,  5,   6]     [2, 3, 5,  6,   8]
[1, 2, 3,  5,  13]     [2, 3, 5,  8,  13]
[1, 2, 3,  6,  12]     [2, 3, 6,  8,  12]
[1, 2, 3,  12, 13]     [2, 3, 8,  12, 13]
[1, 2, 5,  6,  10]     [2, 5, 6,  8,  10]
[1, 2, 5,  10, 13]     [2, 5, 8,  10, 13]
[1, 2, 6,  10, 12]     [2, 6, 8,  10, 12]
[1, 2, 10, 12, 13]     [2, 8, 10, 12, 13]
[1, 3, 5,  6,   9]     [3, 5, 6,  8,   9]
[1, 3, 5,  9,  13]     [3, 5, 8,  9,  13]
[1, 3, 6,  9,  12]     [3, 6, 8,  9,  12]
[1, 3, 9,  12, 13]     [3, 8, 9,  12, 13]
[1, 5, 6,  9,  10]     [5, 6, 8,  9,  10]
[1, 5, 9,  10, 13]     [5, 8, 9,  10, 13]
[1, 6, 9,  10, 12]     [6, 8, 9,  10, 12]
[1, 9, 10, 12, 13]     [8, 9, 10, 12, 13]
>>> len(_)
32


def combine(ls, n):
    if n == 0:
        return [[]]
    if ls == []:
        return []
    ret = combine(ls[1:], n)
    for combination in combine(ls[1:], n-1):      #*
        ret.append(ls[:1] + combination)
    return ret


def permute_repeat(ls, n):
    if n == 0:
        return [[]]
    ret = []
    for i in range(len(ls)):
        for permutation in permute_repeat(ls, n-1):            #*
            ret.append([ls[i]] + permutation)
    return ret

